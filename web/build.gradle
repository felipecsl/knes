apply plugin: 'kotlin-multiplatform'
apply plugin: 'org.jetbrains.kotlin.frontend'

kotlinFrontend {
  downloadNodeJsVersion = "latest"

  webpackBundle {
    bundleName = "main"
    contentPath = file('src/jsMain/web')
    webpackConfigFile = "${project.projectDir.path}/webpack.config.js"
    sourceMapEnabled = true
    mode = "development"
  }
}

kotlin {
  sourceSets {
    jsMain {
      dependencies {
        implementation project(':lib')
        implementation "org.jetbrains.kotlin:kotlin-stdlib-js:$kotlin_version"
        implementation "org.jetbrains:kotlin-react:16.5.2-pre.57-kotlin-1.2.71"
        implementation "org.jetbrains:kotlin-react-dom:16.5.2-pre.57-kotlin-1.2.71"
        implementation 'org.jetbrains:kotlin-react-router-dom:4.3.1-pre.57-kotlin-1.2.71'
        implementation "org.jetbrains.kotlinx:kotlinx-html-js:0.6.11"
      }
    }
  }

  targets {
    fromPreset(presets.js, 'js')
  }
}

dependencies {
  implementation "org.jetbrains.kotlin:kotlin-stdlib-js:$kotlin_version"
}